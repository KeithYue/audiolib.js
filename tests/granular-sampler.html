<!DOCTYPE html>
<html>
<head>
	<script src="../lib/audiolib.js"></script>
	<script src="../plugins/granular-sampler.js"></script>
	<script src="samples/drum-samples.js"></script>
	<script>
var	dev	= Sink(),
	lfo	= audioLib.Oscillator(dev.sampleRate, 0.1),
	gsa	= audioLib.GranularSampler(dev.sampleRate, 50);

function loadSample(name) {
	gsa.sampler.loadWav(atob(samples[name]));
}

loadSample('kick');

gsa.addAutomation('frequency', lfo, 0.8, 'additiveModulation');

dev.on('audioprocess', function (buffer, channelCount) {
	lfo.generateBuffer(buffer.length / channelCount);

	gsa.append(buffer, channelCount);
});
	</script>
</head>
<body>
<button onclick="loadSample('kick')">Kick</button>
<button onclick="loadSample('snare')">Snare</button>
<button onclick="loadSample('hihat')">Hat</button>
<button onclick="loadSample('crash')">Crash</button>
</body>
</html>
