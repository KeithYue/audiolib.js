this.audioLib=(function(r,j){var o=r.Float32Array||Array,e=this;function b(v){var w=new o(v);w.subarray=w.subarray||w.slice;return w}e.Float32Array=b;function t(A,w,x,B,z){this.attack=w||50;this.decay=x||50;this.sustain=B||1;this.release=z||50;this.value=0;var D=this,v=3,y=false,C=[function(){D.value+=1000/D.sampleRate/D.attack;if(D.value>=1){v=1}},function(){D.value-=1000/D.sampleRate/D.decay*D.sustain;if(D.value<=D.sustain){v=2}},function(){D.value=D.sustain},function(){D.value=j.max(0,D.value-1000/D.sampleRate/D.release)}];this.generate=function(){C[v]();return this.value};this.triggerGate=function(E){y=E;v=y?0:3};this.sampleRate=A}function u(){var D=this,A=[];this.velocity=0;this.legato=0;this.retrigger=0;this.polyphony=1;this.activeKeys=[];this.voices=[];this.pitchBend=0;function B(E,F){this.key=E;this.velocity=F;this.noteOff=function(){};this.onKeyChange=function(){};this.changeKey=function(H,G){this.key=H;this.v=G;this.onKeyChange()};this.getFrequency=function(){return D.getFrequencyForKey(this.key)};D.voice.apply(this)}function y(F){var E;for(E=0;E<A.length;E++){if(A[E].key===F){A.splice(E--,1)}}}function C(E,F){y(E);A.push({key:E,velocity:F})}function w(){var E,G,F=[];if(D.legato===0){F=A.slice(0)}else{if(D.legato===1){for(E=0;E<A.length;E++){for(G=0;G<F.length;G++){if(G===A.length-1||(F[G-1].key>A[E].key&&F[G].key<A[E].key)){F.splice(G,0,A[E]);break}}}}else{if(D.legato===2){for(E=0;E<A.length;E++){for(G=0;G<F.length;G++){if(G===A.length-1||(F[G-1].key<A[E].key&&F[G].key>A[E].key)){F.splice(G,0,A[E]);break}}}}}}D.activeKeys=F.slice(-D.polyphony)}function v(){if(!D.voice){return}var E,G,F;if(D.polyphony===1&&D.activeKeys.length>0){E=D.activeKeys.length-1;if(D.voices.length===0){D.voices.push(new B(D.activeKeys[E].key,D.activeKeys[E].velocity))}else{D.voices[0].changeKey(D.activeKeys[E].key,D.activeKeys[E].velocity)}}else{for(G=0;G<D.activeKeys.length;G++){F=false;for(E=0;E<D.voices.length;E++){if(D.voices[E].key===D.activeKeys[G].key){F=true;break}}if(!F){D.voices.push(new B(D.activeKeys[E].key,D.activeKeys[E].velocity))}}}for(E=0;E<D.voices.length;E++){F=false;for(G=0;G<D.activeKeys.length;G++){if(D.voices[E].key===D.activeKeys[G].key){F=true;break}}if(!F){D.voices[E].noteOff();D.voices.splice(E--,1)}}}function z(F,G){var E=D.activeKeys.length;C(F,G);w();v();D.onNoteOn(F,G);if(D.retrigger===0||(E===0&&D.activeKeys.length>0)){D.onTrigger()}}function x(E,F){y(E,F);w();v();D.onNoteOff(E,F);if(D.activeKeys===0){D.onRelease()}}this.onMidi=function(E){switch(E.status){case 9:z(E.data1,E.data2/127);break;case 8:x(E.data1,E.data2/127);break;case 14:D.pitchBend=(E.data1*128+E.data2-8192)/8192;break}};this.getFrequencyForKey=function(E){return 440*j.pow(1.059,E-69)};this.getFrequency=function(){var F=[],E;for(E=0;E<D.activeKeys.length;E++){F.push(D.getFrequencyForKey(D.activeKeys[E].key))}if(F.length>2){return F[0]}return F};this.onTrigger=function(){};this.onRelease=function(){};this.onNoteOn=function(){};this.onNoteOff=function(){};this.voice=null;this.listener=function(E){D.onMidi(E)}}function s(z,w,y,A){var x=this,v=0;x.sampleRate=z;x.stepLength=w||200;x.steps=y||[1,0];x.value=0;x.attack=A||0;x.generate=function(){var D=x.sampleRate/1000*x.stepLength,F=x.steps,E=D*F.length,H,B,C,G,I;if(++v===E){v=0}H=v/E*F.length;B=H%1;H=j.floor(H);C=(H||F.length)-1;G=F[H]-F[C];I=F[H];if(B<x.attack){I-=G-G/x.attack*B}x.value=I;return I};x.triggerGate=function(){v=0}}function n(D,v,y,z){var E=this,x=new b(v),w=v-1,B=y,C=0,A=0;this.volume=E.volume||1;E.sampleRate=D;E.pushSample=function(F){x[B++]=F;A=x[C++]*E.volume;if(B>=w){B=0}if(C>=w){C=0}return A};E.getMix=function(){return A}}function q(C,z,y,v){var D=this,x,w,B;D.delayTime=z||30;D.depth=y||3;D.freq=v||0.1;function A(){x=new b(D.sampleRate*0.1);w=0;var F,E=x.length;for(F=0;F<E;F++){x[F]=0}}D.sampleRate=C;D.osc=new c(C,v);D.calcCoeff=A;D.pushSample=function(F){if(++w>=x.length){w=0}x[w]=F;D.osc.generate();var E=D.delayTime+D.osc.getMix()*D.depth;E*=D.sampleRate/1000;E=w-j.floor(E);while(E<0){E+=x.length}B=x[E];return B};D.getMix=function(){return B};A()}function f(F,B,z){var J=this,A=(!F?44100:F)*2,E=new b(A),D=0,C=0,y=0,I=0,G=j.floor;function H(){C=A/J.samplerate/J.time*1000;y=J.time}function w(L,N,M){var K=N;while(K++!==M){if(K>=A){K=0}E[K]=L}}function x(K){E[D++]+=K;if(D>J.time/1000*J.samplerate){D=0}E[D]=E[D]*J.feedback}function v(L){var K=G(D);if(y!==J.time){H()}D+=C;if(D>=A){D-=A}w(L+E[G(D)]*J.feedback,K,G(D))}this.time=!B?1000:B;this.feedback=0;this.algorithm=0;this.samplerate=F;this.pushSample=function(K){if(this.algorithm===0){x(K)}else{v(K)}I=E[G(D)];return I};this.getMix=function(){return I}}function l(v){var z=new g(v,720.484),y=new g(v,723.431),x=new g(v,1),w=0;this.gain=4;this.master=1;this.sampleRate=v;this.filters=[z,y,x];this.pushSample=function(A){z.pushSample(A);w=z.getMix(1)*this.gain;w=j.atan(w)+w;if(w>0.4){w=0.4}else{if(w<-0.4){w=-0.4}}y.pushSample(w);x.pushSample(y.getMix(0));w=x.getMix(1)*this.master;return w};this.getMix=function(){return w}}(function(w,v){v.Capper=function(y,z){var x=this,A=0;x.sampleRate=y;x.cap=z||1;x.pushSample=function(B){A=B>x.cap?2*x.cap-B:B<-x.cap?-2*x.cap-B:B;return A};x.getMix=function(){return A}};v.Expo=function(y,z){var x=this;sample=0;x.sampleRate=y;x.param=z||0.8;x.pushSample=function(A){sample=(A<0?-j.pow(x.param*2,-A):j.pow(x.param*2,A))/10;return sample};x.getMix=function(){return sample}}}(this,e));function g(A,w,H,F){var I=this,C=[0,0,0,0],v,y,G,x,E=j.sin,z=j.min,B=j.pow;I.cutoff=!w?20000:w;I.resonance=!H?0.1:H;I.samplerate=A;I.type=F||0;function D(){v=2*E(j.PI*z(0.25,I.cutoff/(I.samplerate*2)));y=z(2*(1-B(I.resonance,0.25)),z(2,2/v-v*0.5))}I.pushSample=function(J){if(G!==I.cutoff||x!==I.resonance){D();G=I.cutoff;x=I.resonance}C[3]=J-y*C[2];C[0]=C[0]+v*C[2];C[1]=C[3]-C[0];C[2]=v*C[1]+C[2];C[3]=J-y*C[2];C[0]=C[0]+v*C[2];C[1]=C[3]-C[0];C[2]=v*C[1]+C[2];return C[I.type]};I.getMix=function(J){return C[J||I.type]}}function a(x,y,z){var v=this,w=[0,0];v.cutoff=!y?20000:y;v.resonance=!z?0:z;v.samplerate=x;v.pushSample=function(B){var A=v.cutoff*2/v.samplerate,C=v.resonance+v.resonance/(1-A);w[0]=w[0]+A*(B-w[0]+C*(w[0]-w[1]));w[1]=w[1]+A*(w[0]-w[1]);return w[1]};v.getMix=function(){return w[1]}}function p(B,y,I){var J=this,G=0,A=0,D=j.PI*2,F,x,v,E,H,z;J.cutoff=!y?20000:y;J.resonance=!I?1:I;J.samplerate=B;function C(){F=D*J.cutoff/J.samplerate;x=1-F/(2*(J.resonance+0.5/(1+F))+F-2);v=x*x;E=v+1-2*j.cos(F)*x}J.pushSample=function(w){if(H!==J.cutoff||z!==J.resonance){C();H=J.cutoff;z=J.resonance}G+=(w-A)*E;A+=G;G*=v;return A};J.getMix=function(){return A};C()}function c(y,B){var w=0,A=0,x=j.PI*2,v=new b(1),z;this.frequency=440;if(B){this.frequency=B}this.phaseOffset=0;this.pulseWidth=0.5;this.waveShape=0;this.samplerate=y;this.generate=function(){var F=this.frequency+0,E=this.pulseWidth,D,C=arguments.length;for(D=0;D<C;D++){F+=F*arguments[D]}w=(w+F/this.samplerate/2)%1;A=(w+this.phaseOffset)%1;A=A<E?A/E:(A-E)/(1-E)};this.getMix=function(){return z[this.waveShape]()};this.getPhase=function(){return A};this.reset=function(){w=0};this.setWavetable=function(C){v=C;return true};this.sine=function(){return j.sin(A*x)};this.triangle=function(){if(A<0.5){return 4*A-1}return 3-4*A};this.square=function(){return(A<0.5)?-1:1};this.sawtooth=function(){return 1-A*2};this.invSawtooth=function(){return A*2-1};this.pulse=function(){if(A<0.5){if(A<0.25){return A*8-1}else{return 1-(A-0.25)*8}}return -1};this.wavetable=function(){return v[j.floor(A*v.length)]};z=this.waveShapes=[this.sine,this.triangle,this.pulse,this.sawtooth,this.invSawtooth,this.square]}function d(x,z,A){var w=this,v=[],y;w.sampleRate=x;w.sample=z;w.pitch=A||440;w.delayStart=0;w.delayEnd=0;w.maxVoices=0;w.noteOn=function(F){F=F||w.pitch;var E=F/w.pitch,D=w.sampleRate,G=D*w.delayStart,B=w.sample.length-D*w.delayEnd,C={f:F,p:G,s:E,l:B};v.push(C);return C};w.generate=function(){var B,C;for(B=0;B<v.length;B++){C=v[B];C.p+=C.s;C.p>C.l&&v.splice(B--,1)&&C.onend&&C.onend()}};w.getMix=function(){var C=0,B;for(B=0;B<v.length;B++){C+=d.interpolate(w.sample,v[B].p)}return C};w.loadWav=function(D,C){var B=e.PCMData.decode(D);D=d.splitChannels(B.data,B.channelCount)[0];w.sample=C?d.resample(D,B.sampleRate,1,w.sampleRate,1):D}}d.interpolate=function(v,z){var y=j.floor(z),x=y+1,w=z-y;x=x<v.length?x:0;return v[y]*(1-w)+v[x]*w};d.resample=function(B,v,E,F,x){var z=F/v*x/E,A=B.length,w=j.ceil(A/z),D=new b(w),C,y;for(C=0,y=0;C<A;C+=z){D[y++]=d.interpolate(B,C)}return D};d.splitChannels=function(w,A){var v=w.length,z=v/A,x=[],y,B;for(y=0;y<A;y++){x[y]=new b(z);for(B=0;B<z;B++){x[y][B]=w[y*A+B]}}return x};d.joinChannels=function(x){var z=x.length,w=x[0].length,v=new b(w*z),y,A;for(y=0;y<z;y++){for(A=0;A<w;A++){v[y+A*z]=x[y][A]}}return v};(function(v){function A(H){var J,I=H.length,G={};for(J=0;J<I;J++){G[H[J]]=true}return G}var D=A([256,512,1024,2048,4096,8192,16384]),w=A([48000,44100,22050]),F=String.fromCharCode;function E(L,K,J,I){var H=E.devices,G;for(G in H){if(H.hasOwnProperty(G)&&H[G].enabled){try{return new H[G](L,K,J,I)}catch(M){}}}throw"No audio device available."}function x(G){this.boundTo=G;this.buffers=[];G.activeRecordings.push(this)}x.prototype={toWav:function(G){return e.PCMData.encode({data:this.join(),sampleRate:this.boundTo.sampleRate,channelCount:this.boundTo.channelCount,bytesPerSample:G})},add:function(G){this.buffers.push(G)},clear:function(){this.buffers=[]},stop:function(){var G=this.boundTo.activeRecordings,H;for(H=0;H<G.length;H++){if(G[H]===this){G.splice(H--,1)}}},join:function(){var K=0,L=0,I=this.buffers,G,M,J,H=I.length;for(J=0;J<H;J++){K+=I[J].length}G=new b(K);for(J=0;J<H;J++){for(M=0;M<I[J].length;M++){G[L+M]=I[J][M]}L+=I[J].length}return G}};function C(G){this.type=G}C.prototype={record:function(){return new x(this)},recordData:function(H){var J=this.activeRecordings,I,G=J.length;for(I=0;I<G;I++){J[I].add(H)}},writeBuffers:function(I){var H=this.buffers,G=I.length,J,L,K,M;if(H){for(K=0;K<H.length;K++){J=H[K];L=J.length;for(M=0;M<G&&M<L;M++){I[M]+=J[M]}H[K]=J.subarray(M);K>=L&&H.splice(K--,1)}}},writeBuffer:function(H){var G=this.buffers=this.buffers||[];G.push(H);return G.length}};function B(M,K,H,O){O=w[O]?O:44100;H=D[H]?H:O/2;var Q=this,J=0,N=null,L=new Audio(),G;function P(W,S){var V,U,R;if(B.backgroundWork){if(window.MozBlobBuilder){R=new MozBlobBuilder();R.append('setInterval(function(){ postMessage("tic"); }, '+S+");");U=window.URL.createObjectURL(R.getBlob());V=new Worker(U);V.onmessage=function(){W()};return function(){V.close();window.URL.revokeObjectURL(U)}}U=R=+new Date+"";function T(X){if(X.source===window&&X.data===U&&R<+new Date){R=+new Date+S;W()}window.postMessage(U,"*")}window.addEventListener("message",T,true);window.postMessage(U,"*");return function(){window.removeEventListener("message",T)}}else{V=setInterval(W,S);return function(){clearInterval(V)}}}function I(){var R,U,T,S;if(N){R=L.mozWriteAudio(N);J+=R;if(R<N.length){N=N.subarray(R);return N}N=null}U=L.mozCurrentSampleOffset();T=Number(U+H*K-J)+0;if(T>0){S=new b(T);M&&M(S,Q.channelCount);Q.writeBuffers(S);Q.recordData(S);R=L.mozWriteAudio(S);if(R<S.length){N=S.subarray(R)}J+=R}}L.mozSetup(K,O);G=P(I,20);this.kill=function(){G()};this.activeRecordings=[];this.sampleRate=O;this.channelCount=K;this.type="moz"}B.enabled=true;B.backgroundWork=false;B.prototype=new C("moz");function z(L,K,H,N){N=w[N]?N:44100;H=D[H]?H:4096;var O=this,G=new (window.AudioContext||webkitAudioContext)(),J=G.createJavaScriptNode(H,0,K),M=G.createBufferSource();function I(W){var P=W.outputBuffer,S=P.numberOfChannels,U,R,T=P.length,X=P.size,V=new Array(S),Q=new b(T*S);for(U=0;U<S;U++){V[U]=P.getChannelData(U)}L&&L(Q,S);O.writeBuffers(Q);O.recordData(Q);for(U=0;U<T;U++){for(R=0;R<S;R++){V[R][U]=Q[U*S+R]}}}J.onaudioprocess=I;M.connect(J);J.connect(G.destination);this.kill=function(){};this.activeRecordings=[];this.sampleRate=G.sampleRate;this.channelCount=K;this.type="webkit"}z.enabled=true;z.prototype=new C("webkit");function y(L,K,J,I){I=w[I]?I:44100;J=D[J]?bufferSize:8192;var G=this,M;function H(){var N=new b(J*K);L&&L(N,G.channelCount);G.writeBuffers(N);G.recordData(N)}this.kill=function(){clearInterval(M)};this.activeRecordings=[];setInterval(H,J/I*1000);this.sampleRate=I;this.channelCount=K;this.type="dummy"}y.enabled=true;y.prototype=new C("dummy");E.deviceClass=C;E.propertyEnum=A;E.devices={moz:B,webkit:z,dummy:y};v.AudioDevice=E}(this));this.AudioDevice.createScheduled=function(z){var y=[],v=0,w;function x(B,E){var A=B.length/E,H=w.chunkSize,D=H*E,G,C,F;v=+new Date;for(C=0;C<A;C+=H){for(G=0;G<y.length;G++){y[G].t-=H;if(y[G].t<=0){y[G].f.apply(y[G].x,y[G].a);y.splice(G--,1)}}F=C*D;z(B.subarray(F,F+D),E)}}w=this.apply(this,[x].concat(Array.prototype.splice.call(arguments,1)));w.schedule=function(C,B,A){y.push({f:C,x:B,a:A,t:((new Date-v)*0.001*this.sampleRate)})};w.chunkSize=1;return w};(function(D,C){var v=String.fromCharCode,x=true,B=false;function A(G,F){return F?v(G&255)+A(G>>8,F-1):""}function y(G,F){return F?y(G>>8,F-1)+v(255-G&255):""}function w(H,G,F){return F?y(H,G):A(H,G)}function E(I,J){var G=I.length,K=G-1,H=0,L=C.pow,F;if(J){for(F=0;F<G;F++){H+=(255-I.charCodeAt(F))*L(256,K-F)}}else{for(F=0;F<G;F++){H+=I.charCodeAt(F)*L(256,F)}}return H}function z(I,R,J,O){var S=C.pow,F=C.floor,L=z.convertFromBinary,Q=z.convertToBinary,M=I/8,G=S(2,I),P=G/2,N=P-1,H=1/P,K=1/N;return O?J?R?function(U,T){U=F(U<0?U*P+G:U*N);return Q(U,M,T)}:function(U,T){return Q(F(U*N),M,T)}:R?function(U,T){return Q(U<0?U+G:U,M,T)}:function(U,T){return Q(U,M,T)}:J?R?function(T,U){var V=L(T,U);return V>N?(V-G)*H:V*K}:function(T,U){return L(T,U)*K}:R?function(T,U){var V=L(T,U);return V>N?V-G:V}:function(T,U){return L(T,U)}}z.convertToBinary=w;z.convertFromBinary=E;z.fromFloat32=z(32,x,x,x);z.toFloat32=z(32,x,x,B);z.fromFloat24=z(24,x,x,x);z.toFloat24=z(24,x,x,B);z.fromFloat16=z(16,x,x,x);z.toFloat16=z(16,x,x,B);z.fromFloat8=z(8,x,x,x);z.toFloat8=z(8,x,x,B);z.fromInt32=z(32,x,B,x);z.toInt32=z(32,x,B,B);z.fromInt16=z(16,x,B,x);z.toInt16=z(16,x,B,B);z.fromInt8=z(8,x,B,x);z.toInt8=z(8,x,B,B);z.fromUint32=z(32,B,B,x);z.toUint32=z(32,B,B,B);z.fromUint16=z(16,B,B,x);z.toUint16=z(16,B,B,B);z.fromUint8=z(8,B,B,x);z.toUint8=z(8,B,B,B);D.Binary=z}(this,j));(function(z,y){function x(C){this.data=C}var A=x.prototype={read:function(D){var E=this,C=E.data.substr(0,D);E.skip(D);return C},skip:function(D){var E=this,C=E.data=E.data.substr(D);E.pointer+=D;return C.length},readBuffer:function(E,J,H){var D=this,I="read"+H+J,G=J/8,F=E.length,C=0;while(D.data&&C<F){E[C++]=D[I]()}return C}},B,v;function w(C,E,D){var F=E/8;A["read"+C+E]=function(G){return D(this.read(F),G)}}for(B in y){v=/to([a-z]+)([0-9]+)/i.exec(B);v&&w(v[1],v[2],y[B])}z.Stream=x;x.newType=w}(this,this.Binary));this.PCMData=(function(w,v){function x(y){return(typeof y==="string"?x.decode:x.encode)(y)}x.decode=function(M){var W=new v(M),Q=W.read(4),I=W.readUint32();W=new v(W.read(I));var T=W.read(4),R=W.read(4),K=W.readUint32(),Z=new v(W.read(K)),X=Z.readUint16(),F=Z.readUint16(),C=Z.readUint32(),V=Z.readUint32(),D=Z.readUint16(),E=D/F,S=K===16?Z.readUint16():Z.readUint32(),Y,P,O,H,N,J,U,G,L={};while(W.data){Y=W.read(4);P=W.readUint32();H=W.read(P);U=L[Y]=L[Y]||[];if(Y==="data"){O=~~(P/E);N=new v(H);J=new (typeof b!=="undefined"?b:Array)(O);N.readBuffer(J,E*8,"Float")}else{U.push(H)}}return{channelCount:F,bytesPerSample:D/F,sampleRate:V/D,chunks:L,data:J}};x.encode=function(A){var F=w.fromUint32,z=w.fromUint16,I=A.data,R=A.sampleRate,N=A.channelCount||1,D=A.bytesPerSample||1,M=D*8,P=N*D,C=R*P,O=I.length,Q=O*D,J=j.pow(2,M-1)-1,S=w["fromFloat"+M],K=[],L="",B,E,H,G;K.push("fmt "+F(16)+z(1)+z(N)+F(R)+F(C)+z(P)+z(M));for(E=0;E<O;E++){L+=S(I[E])}K.push("data"+F(Q)+L);G=A.chunks;if(G){for(E in G){if(G.hasOwnProperty(E)){B=G[E];for(H=0;H<B.length;H++){L=B[H];K.push(E+F(L.length)+L)}}}}K=K.join("");return"RIFF"+F(K.length)+"WAVE"+K};return x}(this.Binary,this.Stream));(function(w,x){var D=x.sin,H=x.cos,G=x.sqrt,B=x.floor,C=x.pow,v=x.ln2,A=x.PI,z=A*2;function y(J,I,K){J.sampleRate=I;J.bufferSize=K;J.bandWidth=0.5*K*I*0.5;J.spectrum=new b(K*0.5);J.real=new b(K);J.imag=new b(K);J.peakBand=J.peak=0;J.getBandFrequency=function(L){return this.bandwidth*L+this.bandwidth*0.5};J.calculateSpectrum=function(){var W=this,S=W.spectrum,T=W.real,L=W.imag,V=0.5*W.bufferSize,M=G,R=K*0.5,Q,U,P,O;for(O=0;O<R;O++){Q=T[O];U=L[O];P=V*M(Q*Q+U*U);if(P>W.peak){W.peakBand=O;W.peak=P}}}}function F(J,I,K){return new F[J](I,K)}function E(J,P){var I=this,M=P*P*0.5,L=new b(M),O=new b(M),K;y(I,J,P);for(K=0;K<M;K++){L[K]=D(K*z/P);O[K]=H(K*z/P)}I.forward=function(U){var Z=this,X=Z.real,Q=Z.imag,W=Z.bufferSize*0.5,S=U.length,V,Y,T,R,aa;for(T=0;T<W;T++){V=Y=0;for(R=0;R<S;R++){V+=O[aa=T*R]*U[R];Y+=L[aa]*U[R]}X[T]=V;Q[T]=Y}return Z.calculateSpectrum()}}w.FourierTransform=F;F.DFT=E}(this,j));e.ADSREnvelope=t;e.MidiEventTracker=u;e.StepSequencer=s;e.AllPassFilter=n;e.Chorus=q;e.Delay=f;e.Distortion=l;e.IIRFilter=g;e.LowPassFilter=a;e.LP12Filter=p;e.Oscillator=c;e.Sampler=d;function k(){}k.prototype={type:"effect",sink:true,source:true,mix:0.5,join:function(){return m.apply(0,[this].concat(Array.prototype.splice.call(arguments,0)))}};function m(){var v=Array.prototype.splice.call(arguments,0),w=v.prototype=m.prototype;for(i in w){if(w.hasOwnProperty(i)){v[i]=w[i]}}return v}(function(v){m.prototype=v;v.pushSample=function(z){var w=this,y,x;for(x=0;x<w.length;x++){y=w[x].mix;z=w[x].pushSample(z)*y+z*(1-y)}return z}}(new k()));function h(x,w,v){this.channelCount=w;this.effects=[];function y(){x.apply(this,v)}y.prototype=x.prototype;while(w--){this.effects.push(new y())}}h.prototype={mix:0.5,append:function(w){var x=this,z=x.channelCount,v=w.length,y,A;for(y=0;y<v;y+=z){for(A=0;A<z;A++){w[y+A]=x.effects[A].pushSample(w[y+A])*x.mix+w[y+A]*(1-x.mix)}}return w},join:function(){return BufferEffectChain.apply(0,[this].concat(Array.prototype.splice.call(arguments,0)))}};(function(A,x,z,w,y){z=e.effects={};function v(B){return new e.BufferEffect(this,B,[].slice.call(arguments,1))}for(x=0;x<A.length;x++){w=A[x];z[w]=e[w];y=z[w].prototype=new k();y.name=y.fxid=w;z[w].createBufferBased=v}}(["AllPassFilter","Chorus","Delay","Distortion","IIRFilter","LowPassFilter","LP12Filter"]));e.EffectChain=m;e.EffectClass=k;e.BufferEffect=h;e.version="0.4.5";return e}).call(typeof exports==="undefined"?{}:this,this.window||global,Math);